{
  "mapping_metadata": {
    "source_system": "StackOne",
    "target_system": "Flip HRIS Shift Planning",
    "mapping_version": "2.0",
    "created_date": "2025-01-27",
    "analysis_method": "Ground Truth Validation",
    "confidence_score": 0.88,
    "field_coverage": "12/17 fields mapped (based on actual API)",
    "note": "StackOne supports time entries and employment data, but some shift planning fields require calculation or are not available"
  },
  "fields": {
    "employee_id": {
      "source_field": "employee_id",
      "source_type": "string",
      "source_endpoint": "/unified/hris/time_entries",
      "target_field": "employee_id",
      "target_type": "string",
      "mapping_type": "direct",
      "confidence": 0.95,
      "notes": "Employee ID from time entry or employment"
    },
    "date": {
      "source_field": "start_time",
      "source_type": "date-time",
      "source_endpoint": "/unified/hris/time_entries",
      "target_field": "date",
      "target_type": "string",
      "mapping_type": "transform",
      "confidence": 0.95,
      "notes": "Extract date part from start_time (format: YYYY-MM-DD)"
    },
    "clock_in_time": {
      "source_field": "start_time",
      "source_type": "date-time",
      "source_endpoint": "/unified/hris/time_entries",
      "target_field": "clock_in_time",
      "target_type": "string",
      "mapping_type": "transform",
      "confidence": 0.95,
      "notes": "Extract time part from start_time (format: HH:MM:SS)"
    },
    "clock_out_time": {
      "source_field": "end_time",
      "source_type": "date-time",
      "source_endpoint": "/unified/hris/time_entries",
      "target_field": "clock_out_time",
      "target_type": "string",
      "mapping_type": "transform",
      "confidence": 0.95,
      "notes": "Extract time part from end_time (format: HH:MM:SS)"
    },
    "hours_worked": {
      "source_field": "hours_worked",
      "source_type": "number",
      "source_endpoint": "/unified/hris/time_entries",
      "target_field": "hours_worked",
      "target_type": "decimal",
      "mapping_type": "direct",
      "confidence": 0.95,
      "notes": "Hours worked from time entry"
    },
    "break_start": {
      "source_field": "break_duration",
      "source_type": "number",
      "source_endpoint": "/unified/hris/time_entries",
      "target_field": "break_start",
      "target_type": "string",
      "mapping_type": "calculated",
      "confidence": 0.7,
      "notes": "Not directly available. Calculate from break_duration and start_time (assume break starts at midpoint or use default)"
    },
    "break_end": {
      "source_field": "break_duration",
      "source_type": "number",
      "source_endpoint": "/unified/hris/time_entries",
      "target_field": "break_end",
      "target_type": "string",
      "mapping_type": "calculated",
      "confidence": 0.7,
      "notes": "Not directly available. Calculate from break_duration and break_start"
    },
    "overtime_hours": {
      "source_field": null,
      "source_type": null,
      "source_endpoint": null,
      "target_field": "overtime_hours",
      "target_type": "decimal",
      "mapping_type": "unavailable",
      "confidence": 0.0,
      "notes": "Not available in StackOne API. Would need to calculate based on standard hours threshold"
    },
    "regular_hours": {
      "source_field": "hours_worked",
      "source_type": "number",
      "source_endpoint": "/unified/hris/time_entries",
      "target_field": "regular_hours",
      "target_type": "decimal",
      "mapping_type": "calculated",
      "confidence": 0.75,
      "notes": "Calculate as hours_worked - overtime_hours (if overtime_hours is calculated)"
    },
    "work_schedule_type": {
      "source_field": "employment_contract_type",
      "source_type": "EmploymentScheduleTypeEnum",
      "source_endpoint": "/unified/hris/employments",
      "target_field": "work_schedule_type",
      "target_type": "string",
      "mapping_type": "direct",
      "confidence": 0.9,
      "notes": "Employment contract type includes 'shifts' option. Map value directly"
    },
    "employment_type": {
      "source_field": "employment_type",
      "source_type": "EmploymentTypeEnum",
      "source_endpoint": "/unified/hris/employments",
      "target_field": "employment_type",
      "target_type": "string",
      "mapping_type": "direct",
      "confidence": 0.95,
      "notes": "Employment type (contractor, intern, permanent, etc.)"
    },
    "start_date": {
      "source_field": "start_date",
      "source_type": "date-time",
      "source_endpoint": "/unified/hris/employments",
      "target_field": "start_date",
      "target_type": "string",
      "mapping_type": "transform",
      "confidence": 0.95,
      "notes": "Employment start date (format: YYYY-MM-DD)"
    },
    "end_date": {
      "source_field": "end_date",
      "source_type": "date-time",
      "source_endpoint": "/unified/hris/employments",
      "target_field": "end_date",
      "target_type": "string",
      "mapping_type": "transform",
      "confidence": 0.95,
      "notes": "Employment end date (format: YYYY-MM-DD)"
    },
    "active": {
      "source_field": "active",
      "source_type": "boolean",
      "source_endpoint": "/unified/hris/employments",
      "target_field": "active",
      "target_type": "boolean",
      "mapping_type": "direct",
      "confidence": 0.95,
      "notes": "Employment active status"
    },
    "department": {
      "source_field": "department.name",
      "source_type": "string",
      "source_endpoint": "/unified/hris/employments",
      "target_field": "department",
      "target_type": "string",
      "mapping_type": "nested",
      "confidence": 0.9,
      "notes": "Department name from employment.department.name (HRISBaseGroup)"
    },
    "status": {
      "source_field": "employment_status",
      "source_type": "EmploymentStatusEnum",
      "source_endpoint": "/unified/hris/employments",
      "target_field": "status",
      "target_type": "string",
      "mapping_type": "direct",
      "confidence": 0.9,
      "notes": "Employment status (active, pending, terminated, leave, inactive, etc.)"
    },
    "notes": {
      "source_field": null,
      "source_type": null,
      "source_endpoint": null,
      "target_field": "notes",
      "target_type": "string",
      "mapping_type": "unavailable",
      "confidence": 0.0,
      "notes": "Not available in StackOne TimeEntry or Employment API"
    }
  },
  "mapped_fields": {
    "stackone": {
      "employee_id": "employee_id",
      "date": "start_time (date part)",
      "clock_in_time": "start_time (time part)",
      "clock_out_time": "end_time (time part)",
      "hours_worked": "hours_worked",
      "regular_hours": "hours_worked (calculated)",
      "work_schedule_type": "employment_contract_type",
      "employment_type": "employment_type",
      "start_date": "start_date",
      "end_date": "end_date",
      "active": "active",
      "department": "department.name",
      "status": "employment_status"
    }
  },
  "unmapped_fields": {
    "reason": "StackOne API does not provide all shift planning fields directly",
    "missing_fields": [
      "break_start",
      "break_end",
      "overtime_hours",
      "notes"
    ],
    "calculated_fields": [
      {
        "field": "break_start",
        "calculation": "Estimate based on break_duration and start_time",
        "confidence": 0.7
      },
      {
        "field": "break_end",
        "calculation": "break_start + break_duration",
        "confidence": 0.7
      },
      {
        "field": "regular_hours",
        "calculation": "hours_worked - overtime_hours (if overtime calculated)",
        "confidence": 0.75
      }
    ],
    "recommendation": "Use time entries for shift data and employment for employee context. Calculate break times and overtime based on business rules."
  },
  "api_endpoints": {
    "source": {
      "base_url": "https://api.stackone.com",
      "time_entries_endpoint": "/unified/hris/time_entries",
      "employments_endpoint": "/unified/hris/employments",
      "employee_employments_endpoint": "/unified/hris/employees/{id}/employments",
      "authentication": "Bearer token with x-account-id header"
    },
    "target": {
      "base_url": "https://api.flip.com/v1",
      "shifts_endpoint": "/shift-planning/shifts",
      "authentication": "Bearer token"
    }
  },
  "data_requirements": {
    "time_entry_fields": [
      "id",
      "employee_id",
      "start_time",
      "end_time",
      "hours_worked",
      "break_duration",
      "status"
    ],
    "employment_fields": [
      "id",
      "employee_id",
      "employment_type",
      "employment_contract_type",
      "employment_status",
      "start_date",
      "end_date",
      "active",
      "department"
    ]
  }
}

